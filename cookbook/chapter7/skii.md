### 项目的规划思路  
- 博客主体设计
- 阅读数（可拓展成今天来访人数、总来访人数、阁下是今天第几位访客，总阅读数）
- 用户登录验证（没有注册是因为采取第三方登录，用户只要填写昵称即可）
- 评论或留言板（代码一模一样，前端代码不一样）
- 各种小工具（友情链接、个人社交网站链接、学习书籍链接等等）  

上面的这些功能，会被写成五个应用，如果你有更多的想法，写十几个应用都可以。  
第一步，也是最重要的一步，博客主体的设计是决定了你的后面功能的实现。  
如果前期规划不好的话，需要修改博客的数据库，迁移数据库这个步骤很麻烦，因为是关系型数据库。  
困难点比较多。  
数据库设计方面可以参考前面给的**models.py**  
也可以到我的github上面找关于Django的项目。只要README.md 上写了使用方法和介绍的都是可用的。  
后续也会根据本次教程，分章节生成对应的项目文件。  
### 博客这个应用的代码写作流程  
- 用笔和纸画出你的博客界面和内容位置
- 收藏Django的文档，时常阅读文档
- 根据你的图纸设计博客主体的数据库
- views.py中，每个方法只输出出一种数据（例如文章详情页就只输出文章详情的数据，其他需要的额外内容交给**自定义模板标签**负责输出）
- 配置好你的路由器，也就是urls.py
- 根据你的图纸写模板文件，并把数据传输到上面去，如果两个页面几乎一模一样的（例如博客列表和标签类型列表，写好博客列表页即可。）  
- 采取**模板拓展方法**减少代码量，提高可阅读性，方便后续维护。  

### 技巧
#### 常见的博客设计的写作技巧
通常博客的右边会是这个博主的个人空间、博客标签云或者分类列表、友情链接、时间归档、推荐的书籍等信息。  
这个部分可以写成一个html文件，例如base_right.html  
注意，不是规范的html文件。  
只是写上一部分的代码，如下：  
```html
{% load diy_tags %}   {# 导入我们的自定义模板标签 #}
<div class="site-me-widget-first">
    <h4 class="title">标签</h4>
    <hr>
    <div class="content community">
        {% get_blog_tag_list as tag_list %}  {# 把函数实例化为变量名 #}
        {% for tag in tag_list %}     {# 通过for循环遍历出内容 #}
            <li class="blog-type-tag"><a target="_blank" href="{% url 'blog_tag' tag.slug %}">{{ tag.name }}</a></li>
        {% empty %}   {# 这个empty是说，假如没有标签的话，显示下面p标签的内容 #}
            <p>暂无标签 敬请期待</p>
        {% endfor %}
    </div>
    <h4 class="title">类型</h4>
    <hr>
    <div class="content community">
        {% get_blog_type_list as type_list %}  {# 把函数实例化为变量名 #}
        {% for type in type_list %}     {# 通过for循环遍历出内容 #}
            <li class="blog-type-tag"><a target="_blank" href="{% url 'blog_type' type.slug %}">{{ type.name }}</a></li>
        {% empty %}   {# 这个empty是说，假如没有标签的话，显示下面p标签的内容 #}
            <p>暂无分类 敬请期待</p>
        {% endfor %}
    </div>
</div>
```
更多的内容自行添加上去。  
当上面的文件完成后，在需要的位置导入即可，例如在blog_list.html中需要用到上面的内容
在需要的地方写入`{% include 'base_right.html' %}`即可。  
#### 代码优化
之前说到，按**标签分类的博客列表**和**按类型分类的博客列表**可以先不用写。  
是因为，只要你在views.py中**所有博客列表**、**标签分类的博客列表**、**按类型分类的博客列表**返回的键名都设定为`blogs`。即可使用下面的方法。  
只要写好blog_list.html。  
在blog_type.html和blog_tag.html中写入一句代码即可，如下：  
`{% extends 'blog_list.html' %}`  
#### 未完待续
还有更多方法等待整理
###  经常遇到的错误信息解答  
下面是我整理的经常遇到的报错信息
#### 自定义模板标签不生效，且报错
答：自定义标签的函数写错了，或者是写完自定义模板标签后未重启项目。  
注意：每次写完自定义模板标签后，必须重启项目。  
#### 文章的内容变成了html代码  
这是因为你没有使用管道（过滤器），如果在模板上索引的数据是html格式的，需要加上`|safe`。  
例如我们的文章`{{ blog.body_markdown|safe }}`  
还有我们的目录`{{ blog.toc|safe }}`   
这是表示该html是安全的代码，允许嵌入到html代码当中。
#### 文章列表中出现css代码溢出（不知道这个说法对不对）。  
通常我们的博客列表页之类的。会设计成显示一小部分正文，后面加上**阅读全文**。  
限制正文长度的过滤器是下面代码中的truncatechars。  
`{{ blog.body_markdown|safe|truncatechars:120}}`  
在此基础上还要加上`|striptags` ，这是去除css样式的代码。  
写成下面的例子即可  
`{{ blog.body_markdown|safe|truncatechars:120|striptags }}`  
还有一种处理方法是，在models.py中给Blog加多一个内容。**简介**。  
限制其长度，并在模板文件设计中，规定好博客列表中块的长宽。
#### 无法显示博客的标签，且报错。  
通常情况下，在博客列表和博客详情页中，我们需要在文章介绍中显示博客的标签。  
博客的标签可以有一个或者多个。  
但不管它是一个还是多个，它都是一个列表。  
需要用到for来遍历出内容。  
如下面的例子:  
```html
{% for tag in blog.blog_tag %}
    <a href="{% url 'blog_tag' tag.slug  %}">{{ tag.name }}</a>
{% endfor %}
```
